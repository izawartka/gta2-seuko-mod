#pragma once
#include "../common.h"
#include "../cheat-base.h"

namespace ModMenuModule {
	class InvulnerabilityCheat : public CheatBase {
	public:
		InvulnerabilityCheat();
		virtual ~InvulnerabilityCheat() override;
		static InvulnerabilityCheat* GetInstance();

	private:
		virtual void OnFirstEnable() override;
		virtual void OnEnable() override;
		virtual void OnDisable() override;

		void OnValueUpdate(const std::optional<Game::ushort>& oldValue, const std::optional<Game::ushort>& newValue);

		static InvulnerabilityCheat* m_instance;
		Core::Resolver<Game::ushort*> m_invulnerabilityResolver = nullptr;
		Core::Watched<Game::ushort>* m_watchedInvulnerability = nullptr;
	};
}
